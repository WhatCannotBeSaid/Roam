# Roam 视觉系统 · 参考

## APCA 极性感知对比度

APCA（Accessible Perceptual Contrast Algorithm）按「正极性」（深字浅底）与「负极性」（浅字深底）分别计算 Lc（perceived contrast）。

### 使用方式

- **日间（正极性）**：正文为深色、背景为浅色。目标 Lc ≥ 75，强光环境建议 Lc 80。
- **夜间（负极性）**：正文为浅色、背景为深色。目标 Lc 在 60–80；禁止使用纯白 `#FFFFFF` 作为正文，需通过降低文字亮度或提高背景亮度避免光晕。

### 修正策略

若某组配色 Lc 不达标：

1. 保持色相（Hue）不变。
2. 沿同一色相轴线调整明度（Lightness）：日间可加深文字或减浅背景；夜间可减浅文字或加深背景。
3. 重新计算 Lc 直至满足阈值。

### 参考实现

实际计算可参考 [APCA 官方](https://www.myndex.com/APCA/) 或使用 npm 包 `apca-w3`。校验时输入前景与背景的 sRGB 值，得到 Lc 数值后与上述阈值对比。

---

## 色相环协调

- **主色与辅助色**：类比色，色相差约 ΔH ≈ 30°（例如主色竹青，辅助色秋香）。
- **功能/强调色**（TODO、重要标签等）：分裂补色，与主色形成清晰区分。
- **中性色**：背景、边框等在灰阶基础上注入 3%–8% 主色饱和度（例如用带微量主色相的灰色，而非纯 #808080）。

---

## 色彩来源

所有色值仅从 **https://colors.masantu.com/#/** 选取；变量名与语义在 `:root` 与 `.rm-dark-theme` 下统一管理，并作用于 `.roam-app` 以覆盖插件 UI。
